<!DOCTYPE html>
<html lang="{{ lang }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GigHalal - {% if lang == 'ms' %}Platform Gig Halal #1 Malaysia{% else %}Malaysia's #1 Halal Gig Platform{% endif %}</title>
    <meta name="description" content="{% if lang == 'ms' %}Platform gig halal terbesar di Malaysia. Cari kerja freelance, side hustle, dan projek sambilan dengan pendapatan RM800-RM4000 sebulan.{% else %}Malaysia's largest halal gig platform. Find freelance work, side hustles, and part-time projects earning RM800-RM4000 per month.{% endif %}">
    <link rel="stylesheet" href="/static/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=Crimson+Pro:wght@600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="app">
        <!-- Navigation -->
        <nav class="navbar">
            <div class="container">
                <div class="nav-brand">
                    <span class="logo-text">GigHalal</span>
                </div>
                
                <div class="nav-links">
                    <a href="#cari-gig" class="nav-link">{{ t('find_gigs') }}</a>
                    <a href="#kategori" class="nav-link">{{ t('categories') }}</a>
                    <a href="#cara-kerja" class="nav-link">{{ t('how_it_works') }}</a>
                    <button onclick="toggleLanguage()" class="lang-switcher" title="Switch language / Tukar bahasa" style="background: transparent; border: 1px solid rgba(255,255,255,0.3); color: white; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-size: 14px; margin-right: 12px;">
                        <span>üåê</span> <span>{{ 'EN' if lang == 'ms' else 'MS' }}</span>
                    </button>
                    <button class="btn-nav" onclick="app.showLogin()">{{ t('login') }}</button>
                    <button class="btn-primary" onclick="app.showRegister()">{{ t('register_free') }}</button>
                </div>
                
                <div class="mobile-menu-btn" onclick="app.toggleMobileMenu()">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </nav>

        <!-- Hero Section -->
        <section class="hero">
            <div class="hero-decoration"></div>
            <div class="container">
                <div class="hero-content">
                    <div class="hero-badge">
                        <span>üî•</span> {{ t('active_freelancers') }}
                    </div>
                    <h1 class="hero-title">
                        {{ t('earn_income') }}<br>
                        <span class="highlight">{{ t('halal_blessed') }}</span><br>
                        {{ t('from_home') }}
                    </h1>
                    <p class="hero-description">
                        {{ t('hero_description') }}
                    </p>

                    <div class="hero-stats">
                        <div class="stat-item">
                            <div class="stat-number" id="totalGigs">2,847</div>
                            <div class="stat-label">{{ t('active_gigs_stat') }}</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">RM 2.3J</div>
                            <div class="stat-label">{{ t('paid_this_year') }}</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">24 Jam</div>
                            <div class="stat-label">{{ t('instant_payout') }}</div>
                        </div>
                    </div>

                    <div class="hero-cta">
                        <button class="btn-hero-primary" onclick="app.showRegister()">
                            {{ t('start_earning') }}
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M7.5 15L12.5 10L7.5 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </button>
                        <button class="btn-hero-secondary" onclick="app.scrollTo('cara-kerja')">
                            {{ t('watch_demo') }}
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <circle cx="10" cy="10" r="8" stroke="currentColor" stroke-width="2"/>
                                <path d="M8 7L13 10L8 13V7Z" fill="currentColor"/>
                            </svg>
                        </button>
                    </div>

                    <div class="hero-trust">
                        <img src="https://via.placeholder.com/40x40" alt="Suruhanjaya Syarikat Malaysia">
                        <span>{{ t('registered_ssm') }}</span>
                    </div>
                </div>
                
                <div class="hero-visual">
                    <div class="gig-card-floating gig-1">
                        <div class="gig-card-mini">
                            <span class="gig-icon">üé®</span>
                            <div>
                                <div class="gig-title-mini">Design Logo</div>
                                <div class="gig-price-mini">RM 250-500</div>
                            </div>
                            <span class="halal-mini">HALAL</span>
                        </div>
                    </div>
                    
                    <div class="gig-card-floating gig-2">
                        <div class="gig-card-mini">
                            <span class="gig-icon">‚úçÔ∏è</span>
                            <div>
                                <div class="gig-title-mini">Translate Content</div>
                                <div class="gig-price-mini">RM 400-800</div>
                            </div>
                            <span class="instant-mini">‚ö° INSTANT</span>
                        </div>
                    </div>
                    
                    <div class="gig-card-floating gig-3">
                        <div class="gig-card-mini">
                            <span class="gig-icon">üé¨</span>
                            <div>
                                <div class="gig-title-mini">Edit Video TikTok</div>
                                <div class="gig-price-mini">RM 150-300</div>
                            </div>
                            <span class="brand-mini">üåü BRAND</span>
                        </div>
                    </div>
                    
                    <div class="earnings-popup">
                        <div class="popup-icon">üí∞</div>
                        <div>
                            <div class="popup-title">{{ t('payment_received_popup') }}</div>
                            <div class="popup-amount">+ RM 450.00</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Categories Section -->
        <section id="kategori" class="categories-section">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">{{ t('popular_categories') }}</h2>
                    <p class="section-subtitle">{{ t('choose_skill_subtitle') }}</p>
                </div>

                <div class="categories-grid" id="categoriesGrid">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>
        </section>

        <!-- Gigs Section -->
        <section id="cari-gig" class="gigs-section">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">{{ t('latest_gigs') }}</h2>
                    <div class="gigs-filters">
                        <input type="text" class="search-input" placeholder="{{ t('search_gigs') }}" id="searchInput">
                        <select class="filter-select" id="categoryFilter">
                            <option value="">{{ t('all_categories') }}</option>
                        </select>
                        <select class="filter-select" id="locationFilter">
                            <option value="">{{ t('all_locations') }}</option>
                            <option value="Kuala Lumpur">Kuala Lumpur</option>
                            <option value="Penang">Penang</option>
                            <option value="Johor Bahru">Johor Bahru</option>
                            <option value="Remote">Remote</option>
                        </select>
                        <label class="halal-filter">
                            <input type="checkbox" id="halalFilter" checked>
                            <span>{{ t('halal_only') }}</span>
                        </label>
                    </div>
                </div>

                <div class="gigs-grid" id="gigsGrid">
                    <!-- Will be populated by JavaScript -->
                </div>

                <div class="load-more">
                    <button class="btn-secondary" onclick="app.loadMoreGigs()">{{ t('view_more') }}</button>
                </div>
            </div>
        </section>

        <!-- How It Works -->
        <section id="cara-kerja" class="how-it-works">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">{{ t('how_it_works') }}</h2>
                    <p class="section-subtitle">{{ t('easy_fast_subtitle') }}</p>
                </div>

                <div class="steps-grid">
                    <div class="step-card">
                        <div class="step-number">01</div>
                        <div class="step-icon">üìù</div>
                        <h3 class="step-title">{{ t('step_1_title') }}</h3>
                        <p class="step-description">{{ t('step_1_desc') }}</p>
                    </div>

                    <div class="step-card">
                        <div class="step-number">02</div>
                        <div class="step-icon">üîç</div>
                        <h3 class="step-title">{{ t('step_2_title') }}</h3>
                        <p class="step-description">{{ t('step_2_desc') }}</p>
                    </div>

                    <div class="step-card">
                        <div class="step-number">03</div>
                        <div class="step-icon">üíº</div>
                        <h3 class="step-title">{{ t('step_3_title') }}</h3>
                        <p class="step-description">{{ t('step_3_desc') }}</p>
                    </div>

                    <div class="step-card">
                        <div class="step-number">04</div>
                        <div class="step-icon">üí∞</div>
                        <h3 class="step-title">{{ t('step_4_title') }}</h3>
                        <p class="step-description">{{ t('step_4_desc') }}</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Testimonials -->
        <section class="testimonials-section">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">{{ t('success_stories') }}</h2>
                    <p class="section-subtitle">{{ t('success_subtitle') }}</p>
                </div>

                <div class="testimonials-grid">
                    <div class="testimonial-card">
                        <div class="testimonial-rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                        <p class="testimonial-text">{{ t('testimonial_1') }}</p>
                        <div class="testimonial-author">
                            <img src="https://via.placeholder.com/50" alt="Nurul">
                            <div>
                                <div class="author-name">{{ t('testimonial_1_name') }}</div>
                                <div class="author-role">{{ t('testimonial_1_role') }}</div>
                            </div>
                        </div>
                        <div class="testimonial-earnings">{{ t('testimonial_1_earnings') }}</div>
                    </div>

                    <div class="testimonial-card">
                        <div class="testimonial-rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                        <p class="testimonial-text">{{ t('testimonial_2') }}</p>
                        <div class="testimonial-author">
                            <img src="https://via.placeholder.com/50" alt="Ahmad">
                            <div>
                                <div class="author-name">{{ t('testimonial_2_name') }}</div>
                                <div class="author-role">{{ t('testimonial_2_role') }}</div>
                            </div>
                        </div>
                        <div class="testimonial-earnings">{{ t('testimonial_2_earnings') }}</div>
                    </div>

                    <div class="testimonial-card">
                        <div class="testimonial-rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                        <p class="testimonial-text">{{ t('testimonial_3') }}</p>
                        <div class="testimonial-author">
                            <img src="https://via.placeholder.com/50" alt="Siti">
                            <div>
                                <div class="author-name">{{ t('testimonial_3_name') }}</div>
                                <div class="author-role">{{ t('testimonial_3_role') }}</div>
                            </div>
                        </div>
                        <div class="testimonial-earnings">{{ t('testimonial_3_earnings') }}</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- CTA Section -->
        <section class="cta-section">
            <div class="container">
                <div class="cta-content">
                    <h2 class="cta-title">{{ t('ready_to_earn') }}</h2>
                    <p class="cta-description">{{ t('join_freelancers') }}</p>
                    <button class="btn-cta" onclick="app.showRegister()">{{ t('register_now_free') }}</button>
                    <div class="cta-note">{{ t('cta_benefits') }}</div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <div class="container">
                <div class="footer-grid">
                    <div class="footer-col">
                        <div class="footer-brand">
                            <span class="logo-text">GigHalal</span>
                        </div>
                        <p class="footer-description">{{ t('footer_description') }}</p>
                        <div class="footer-social">
                            <a href="#" class="social-link">Facebook</a>
                            <a href="#" class="social-link">Instagram</a>
                            <a href="#" class="social-link">TikTok</a>
                            <a href="#" class="social-link">Twitter/X</a>
                        </div>
                    </div>

                    <div class="footer-col">
                        <h4 class="footer-heading">{{ t('platform') }}</h4>
                        <ul class="footer-links">
                            <li><a href="#cari-gig">{{ t('find_gigs') }}</a></li>
                            <li><a href="#kategori">{{ t('categories') }}</a></li>
                            <li><a href="#cara-kerja">{{ t('how_it_works') }}</a></li>
                            <li><a href="#">{{ t('pricing') }}</a></li>
                        </ul>
                    </div>

                    <div class="footer-col">
                        <h4 class="footer-heading">{{ t('resources') }}</h4>
                        <ul class="footer-links">
                            <li><a href="#">{{ t('blog') }}</a></li>
                            <li><a href="#">{{ t('freelancer_guide') }}</a></li>
                            <li><a href="#">{{ t('faq') }}</a></li>
                            <li><a href="#">{{ t('support') }}</a></li>
                        </ul>
                    </div>

                    <div class="footer-col">
                        <h4 class="footer-heading">{{ t('legal') }}</h4>
                        <ul class="footer-links">
                            <li><a href="#">{{ t('terms_conditions') }}</a></li>
                            <li><a href="#">{{ t('privacy_policy') }}</a></li>
                            <li><a href="#">{{ t('halal_compliance') }}</a></li>
                            <li><a href="#">{{ t('gig_workers_bill') }}</a></li>
                        </ul>
                    </div>
                </div>

                <div class="footer-bottom">
                    <div class="footer-company">
                        <img src="/static/images/calmic-logo.png" alt="Calmic Sdn Bhd" class="calmic-logo">
                        <p>&copy; 2025 GigHalal. {{ t('rights_reserved') }}</p>
                    </div>
                    <div class="visitor-counter">
                        <span>üëÅÔ∏è {{ t('visitor_count') }} <strong id="visitorCount">{{ visitor_count }}</strong></span>
                    </div>
                    <div class="footer-badges">
                        <span class="badge">{{ t('ssm_registered') }}</span>
                        <span class="badge">{{ t('secure_payment') }}</span>
                    </div>
                </div>
            </div>
        </footer>

        <!-- Modal: Login -->
        <div id="loginModal" class="modal">
            <div class="modal-content">
                <button class="modal-close" onclick="app.closeModal('loginModal')">&times;</button>
                <h2 class="modal-title">{{ t('login_title') }}</h2>
                <form id="loginForm" onsubmit="app.handleLogin(event)">
                    <div class="form-group">
                        <label>{{ t('email') }}</label>
                        <input type="email" name="email" required>
                    </div>
                    <div class="form-group">
                        <label>{{ t('password') }}</label>
                        <input type="password" name="password" required>
                    </div>
                    <button type="submit" class="btn-modal-primary">{{ t('login') }}</button>
                    <p class="modal-footer-text">{{ t('no_account') }} <a href="#" onclick="app.switchToRegister()">{{ t('register_now') }}</a></p>
                </form>
            </div>
        </div>

        <!-- Modal: Register -->
        <div id="registerModal" class="modal">
            <div class="modal-content">
                <button class="modal-close" onclick="app.closeModal('registerModal')">&times;</button>
                <h2 class="modal-title">{{ t('register_title') }}</h2>
                <form id="registerForm" onsubmit="app.handleRegister(event)">
                    <div class="form-group">
                        <label>{{ t('full_name') }}</label>
                        <input type="text" name="full_name" required>
                    </div>
                    <div class="form-group">
                        <label>{{ t('username') }}</label>
                        <input type="text" name="username" required>
                    </div>
                    <div class="form-group">
                        <label>{{ t('email') }}</label>
                        <input type="email" name="email" required>
                    </div>
                    <div class="form-group">
                        <label>{{ t('phone_number') }}</label>
                        <input type="tel" name="phone" placeholder="+60">
                    </div>
                    <div class="form-group">
                        <label>{{ t('password') }}</label>
                        <input type="password" name="password" required minlength="6">
                    </div>
                    <div class="form-group">
                        <label>{{ t('location') }}</label>
                        <select name="location" required>
                            <option value="">{{ t('select_location') }}</option>
                            <option value="Kuala Lumpur">Kuala Lumpur</option>
                            <option value="Selangor">Selangor</option>
                            <option value="Penang">Penang</option>
                            <option value="Johor">Johor</option>
                            <option value="Other">Lain-lain</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>{{ t('register_as') }}</label>
                        <select name="user_type" required>
                            <option value="freelancer">{{ t('freelancer_find_work') }}</option>
                            <option value="client">{{ t('client_post_work') }}</option>
                            <option value="both">{{ t('both') }}</option>
                        </select>
                    </div>
                    <div class="form-group" style="margin-top: 20px;">
                        <label style="display: flex; align-items: start; gap: 10px; cursor: pointer; font-size: 14px; line-height: 1.5;">
                            <input type="checkbox" id="privacyConsent" name="privacy_consent" required style="margin-top: 4px; cursor: pointer;">
                            <span>
                                I agree to the <a href="#" onclick="app.showPrivacyPolicy(event)" style="color: var(--primary); text-decoration: underline;">Privacy Policy</a> and consent to GigHalal Tech processing my personal data as described, including identity verification, payment processing, and compliance with PDPA 2010.
                            </span>
                        </label>
                    </div>
                    <button type="submit" class="btn-modal-primary">{{ t('register_free') }}</button>
                    <p class="modal-footer-text">{{ t('have_account') }} <a href="#" onclick="app.switchToLogin()">{{ t('login_now') }}</a></p>
                </form>
            </div>
        </div>

        <!-- Modal: Privacy Policy -->
        <div id="privacyPolicyModal" class="modal">
            <div class="modal-content modal-large" style="max-width: 800px; max-height: 85vh; overflow-y: auto;">
                <button class="modal-close" onclick="app.closeModal('privacyPolicyModal')">&times;</button>
                <h2 class="modal-title">Privacy Policy - GigHalal Tech Sdn Bhd</h2>
                <div style="padding: 20px; line-height: 1.6; font-size: 14px;">
                    <h3>1. Introduction</h3>
                    <p>GigHalal Tech Sdn Bhd ("we", "us", "our") is committed to protecting your personal data in accordance with the Personal Data Protection Act 2010 (PDPA) and its amendments. This Privacy Policy explains how we collect, use, disclose, and protect your personal data when you use the GigHalal mobile app ("App") as a freelancer, client, or visitor.</p>
                    <p>We process personal data only for lawful purposes related to providing gig matching, payment facilitation, and app services.</p>
                    <p><strong>Data Protection Officer (DPO):</strong><br>
                    Email: dpo@gighalal.my<br>
                    Contact: privacy@gighalal.my</p>

                    <h3>2. Personal Data We Collect</h3>
                    <p>We collect the following types of personal data:</p>
                    <ul>
                        <li><strong>Basic Information:</strong> Full name, phone number, email, profile photo, date of birth.</li>
                        <li><strong>Identity Verification:</strong> NRIC/Passport details (staged: last 4 digits initially; full for payouts > RM500), selfie for verification.</li>
                        <li><strong>Financial Data:</strong> Bank account/e-wallet details (e.g., Touch 'n Go), transaction history.</li>
                        <li><strong>Gig-Related Data:</strong> Skills, video pitches, location (for matching), earnings records, ratings/reviews.</li>
                        <li><strong>Device/Usage Data:</strong> IP address, device ID, app usage logs.</li>
                    </ul>
                    <p>Sensitive personal data (e.g., religious preferences for halal matching) is collected only with your explicit consent.</p>

                    <h3>3. Purposes of Processing</h3>
                    <p>We process your personal data to:</p>
                    <ul>
                        <li>Facilitate gig matching, applications, and communications.</li>
                        <li>Process payments and payouts (via licensed gateways like iPay88/SenangPay).</li>
                        <li>Verify identity and prevent fraud (KYC/AML compliance).</li>
                        <li>Provide earnings summaries and tax reports (aligned with LHDN and Gig Workers Bill 2025).</li>
                        <li>Improve app features and send notifications (with consent).</li>
                        <li>Comply with legal obligations (e.g., SOCSO contributions, dispute resolution).</li>
                    </ul>

                    <h3>4. Consent and Withdrawal</h3>
                    <p>By registering or using the App, you consent to this processing. You may withdraw consent at any time via app settings or by emailing us‚Äîthis may limit app functionality (e.g., no payouts without financial data).</p>

                    <h3>5. Disclosure to Third Parties</h3>
                    <p>We may share data with:</p>
                    <ul>
                        <li>Payment gateways and banks for transactions.</li>
                        <li>Service providers (e.g., cloud storage, analytics‚Äîbound by PDPA).</li>
                        <li>Authorities (e.g., LHDN, PDPC, Gig Workers Tribunal) as required by law.</li>
                    </ul>
                    <p>No sale of data to marketers without explicit opt-in.</p>

                    <h3>6. Data Security and Breach Notification</h3>
                    <p>We use encryption (256-bit for NRIC/financial data) and secure servers. In case of a breach likely to cause significant harm, we will notify you and the Personal Data Protection Commissioner (PDPC) as per 2025 guidelines.</p>

                    <h3>7. Your Rights</h3>
                    <p>Under PDPA, you have the right to:</p>
                    <ul>
                        <li>Access and correct your data.</li>
                        <li>Request data portability (export in structured format).</li>
                        <li>Limit processing (e.g., opt-out of marketing).</li>
                        <li>Delete your account and data (subject to legal retention).</li>
                    </ul>
                    <p>Submit requests to privacy@gighalal.my‚Äîwe respond within 30 days.</p>

                    <h3>8. Data Retention</h3>
                    <p>We retain data only as needed (e.g., 7 years for financial records per tax laws) or until account deletion.</p>

                    <h3>9. Changes to This Policy</h3>
                    <p>We may update this Policy‚Äîsignificant changes notified via app/email.</p>
                    <p><strong>Last Updated:</strong> December 2025</p>
                </div>
                <div style="padding: 20px; text-align: center; border-top: 1px solid #ddd;">
                    <button class="btn-modal-primary" onclick="app.closeModal('privacyPolicyModal')" style="min-width: 150px;">Close</button>
                </div>
            </div>
        </div>

        <!-- Modal: Gig Details -->
        <div id="gigModal" class="modal">
            <div class="modal-content modal-large">
                <button class="modal-close" onclick="app.closeModal('gigModal')">&times;</button>
                <div id="gigDetails">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <script src="/static/js/app.js"></script>
    <script>
        async function toggleLanguage() {
            const currentLang = '{{ lang }}';
            const newLang = currentLang === 'ms' ? 'en' : 'ms';

            try {
                const response = await fetch('/api/language', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ language: newLang })
                });

                if (response.ok) {
                    // Reload page to apply language change
                    location.reload();
                } else {
                    console.error('Failed to change language');
                }
            } catch (error) {
                console.error('Error changing language:', error);
            }
        }
    </script>
</body>
</html>
