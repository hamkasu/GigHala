<!DOCTYPE html>
<html lang="{{ lang }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GigHalal - {% if lang == 'ms' %}Platform Gig Halal #1 Malaysia{% else %}Malaysia's #1 Halal Gig Platform{% endif %}</title>
    <meta name="description" content="{% if lang == 'ms' %}Platform gig halal terbesar di Malaysia. Cari kerja freelance, side hustle, dan projek sambilan dengan pendapatan RM800-RM4000 sebulan.{% else %}Malaysia's largest halal gig platform. Find freelance work, side hustles, and part-time projects earning RM800-RM4000 per month.{% endif %}">
    <link rel="stylesheet" href="/static/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=Crimson+Pro:wght@600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Islamic/Western Date Bar -->
    <div class="date-bar" style="background: linear-gradient(135deg, #1a3a2a 0%, #0d2818 100%); text-align: center; padding: 8px 16px; font-size: 13px; color: rgba(255,255,255,0.9); border-bottom: 1px solid rgba(0,200,83,0.2);">
        <div style="display: flex; align-items: center; justify-content: flex-end; gap: 12px; padding-right: 24px;">
            <span style="color: #00C853; font-weight: 600;">{{ today_hijri }}</span>
            <span style="color: rgba(255,255,255,0.4);">|</span>
            <span style="color: rgba(255,255,255,0.8);">{{ today_gregorian }}</span>
        </div>
    </div>

    <div id="app">
        <!-- Navigation -->
        <nav class="navbar">
            <div class="container">
                <div class="nav-brand">
                    <span class="logo-text">GigHalal</span>
                </div>
                
                <div class="nav-links">
                    <a href="#cari-gig" class="nav-link">{{ t('find_gigs') }}</a>
                    <a href="#kategori" class="nav-link">{{ t('categories') }}</a>
                    <a href="#cara-kerja" class="nav-link">{{ t('how_it_works') }}</a>
                    <button onclick="toggleLanguage()" class="lang-switcher" title="Switch language / Tukar bahasa" style="background: transparent; border: 1px solid rgba(255,255,255,0.3); color: white; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-size: 14px; margin-right: 12px;">
                        <span>üåê</span> <span>{{ 'EN' if lang == 'ms' else 'MS' }}</span>
                    </button>
                    <button class="btn-nav" onclick="app.showLogin()">{{ t('login') }}</button>
                    <button class="btn-primary" onclick="app.showRegister()">{{ t('register_free') }}</button>
                </div>
                
                <div class="mobile-menu-btn" id="mobileMenuBtn" onclick="toggleMobileMenu()">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </nav>

        <!-- Mobile Menu Overlay -->
        <div class="mobile-menu-overlay" id="mobileMenuOverlay" onclick="closeMobileMenu()"></div>

        <!-- Mobile Menu -->
        <div class="mobile-menu" id="mobileMenu">
            <div class="mobile-menu-links">
                <a href="#cari-gig" class="mobile-menu-link" onclick="closeMobileMenu()">{{ t('find_gigs') }}</a>
                <a href="#kategori" class="mobile-menu-link" onclick="closeMobileMenu()">{{ t('categories') }}</a>
                <a href="#cara-kerja" class="mobile-menu-link" onclick="closeMobileMenu()">{{ t('how_it_works') }}</a>
            </div>
            <div class="mobile-menu-divider"></div>
            <div class="mobile-menu-buttons">
                <button class="btn-nav" onclick="closeMobileMenu(); app.showLogin()">{{ t('login') }}</button>
                <button class="btn-primary" onclick="closeMobileMenu(); app.showRegister()">{{ t('register_free') }}</button>
            </div>
            <div class="mobile-lang-switcher" onclick="toggleLanguage()">
                <span>üåê</span>
                <span>{{ 'Switch to English' if lang == 'ms' else 'Tukar ke Bahasa Melayu' }}</span>
            </div>
        </div>

        <!-- Hero Section -->
        <section class="hero">
            <div class="hero-decoration"></div>
            <div class="container">
                <div class="hero-content">
                    <div class="hero-badge">
                        <span>üî•</span> {{ t('active_freelancers') }}
                    </div>
                    <h1 class="hero-title">
                        {{ t('earn_income') }}<br>
                        <span class="highlight">{{ t('halal_blessed') }}</span><br>
                        {{ t('from_home') }}
                    </h1>
                    <p class="hero-description">
                        {{ t('hero_description') }}
                    </p>

                    <div class="hero-stats">
                        <div class="stat-item">
                            <div class="stat-number" id="totalGigs">2,847</div>
                            <div class="stat-label">{{ t('active_gigs_stat') }}</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">RM 2.3J</div>
                            <div class="stat-label">{{ t('paid_this_year') }}</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">24 Jam</div>
                            <div class="stat-label">{{ t('instant_payout') }}</div>
                        </div>
                    </div>

                    <div class="hero-cta">
                        <button class="btn-hero-primary" onclick="app.showRegister()">
                            {{ t('start_earning') }}
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M7.5 15L12.5 10L7.5 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </button>
                        <button class="btn-hero-secondary" onclick="app.scrollTo('cara-kerja')">
                            {{ t('watch_demo') }}
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <circle cx="10" cy="10" r="8" stroke="currentColor" stroke-width="2"/>
                                <path d="M8 7L13 10L8 13V7Z" fill="currentColor"/>
                            </svg>
                        </button>
                    </div>

                    <div class="hero-trust">
                        <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="40" height="40" rx="8" fill="#0D7C66"/><path d="M20 10L28 15V25L20 30L12 25V15L20 10Z" stroke="white" stroke-width="2"/><path d="M16 20L19 23L24 17" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                        <span>{{ t('registered_ssm') }}</span>
                    </div>
                </div>
                
                <div class="hero-visual">
                    <div class="gig-card-floating gig-1">
                        <div class="gig-card-mini">
                            <span class="gig-icon">üé®</span>
                            <div>
                                <div class="gig-title-mini">Design Logo</div>
                                <div class="gig-price-mini">RM 250-500</div>
                            </div>
                            <span class="halal-mini">HALAL</span>
                        </div>
                    </div>
                    
                    <div class="gig-card-floating gig-2">
                        <div class="gig-card-mini">
                            <span class="gig-icon">‚úçÔ∏è</span>
                            <div>
                                <div class="gig-title-mini">Translate Content</div>
                                <div class="gig-price-mini">RM 400-800</div>
                            </div>
                            <span class="instant-mini">‚ö° INSTANT</span>
                        </div>
                    </div>
                    
                    <div class="gig-card-floating gig-3">
                        <div class="gig-card-mini">
                            <span class="gig-icon">üé¨</span>
                            <div>
                                <div class="gig-title-mini">Edit Video TikTok</div>
                                <div class="gig-price-mini">RM 150-300</div>
                            </div>
                            <span class="brand-mini">üåü BRAND</span>
                        </div>
                    </div>
                    
                    <div class="earnings-popup">
                        <div class="popup-icon">üí∞</div>
                        <div>
                            <div class="popup-title">{{ t('payment_received_popup') }}</div>
                            <div class="popup-amount">+ RM 450.00</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Categories Section -->
        <section id="kategori" class="categories-section">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">{{ t('popular_categories') }}</h2>
                    <p class="section-subtitle">{{ t('choose_skill_subtitle') }}</p>
                </div>

                <div class="categories-grid" id="categoriesGrid">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>
        </section>

        <!-- Gigs Section -->
        <section id="cari-gig" class="gigs-section">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">{{ t('latest_gigs') }}</h2>
                    <div class="gigs-filters">
                        <input type="text" class="search-input" placeholder="{{ t('search_gigs') }}" id="searchInput">
                        <select class="filter-select" id="categoryFilter">
                            <option value="">{{ t('all_categories') }}</option>
                        </select>
                        <input
                            type="text"
                            class="filter-select"
                            id="locationFilter"
                            list="locationsListFilter"
                            placeholder="{{ t('all_locations') }}"
                        >
                        <datalist id="locationsListFilter">
                            <option value="">
                            <option value="Remote">
                            <option value="Batu Pahat, Johor">
                            <option value="Johor Bahru, Johor">
                            <option value="Kluang, Johor">
                            <option value="Kota Tinggi, Johor">
                            <option value="Kulai, Johor">
                            <option value="Mersing, Johor">
                            <option value="Muar, Johor">
                            <option value="Pontian, Johor">
                            <option value="Segamat, Johor">
                            <option value="Tangkak, Johor">
                            <option value="Alor Setar, Kedah">
                            <option value="Baling, Kedah">
                            <option value="Bandar Baharu, Kedah">
                            <option value="Kota Setar, Kedah">
                            <option value="Kuala Muda, Kedah">
                            <option value="Kubang Pasu, Kedah">
                            <option value="Kulim, Kedah">
                            <option value="Langkawi, Kedah">
                            <option value="Padang Terap, Kedah">
                            <option value="Pendang, Kedah">
                            <option value="Pokok Sena, Kedah">
                            <option value="Sik, Kedah">
                            <option value="Yan, Kedah">
                            <option value="Bachok, Kelantan">
                            <option value="Gua Musang, Kelantan">
                            <option value="Jeli, Kelantan">
                            <option value="Kota Bharu, Kelantan">
                            <option value="Kuala Krai, Kelantan">
                            <option value="Machang, Kelantan">
                            <option value="Pasir Mas, Kelantan">
                            <option value="Pasir Puteh, Kelantan">
                            <option value="Tanah Merah, Kelantan">
                            <option value="Tumpat, Kelantan">
                            <option value="Alor Gajah, Melaka">
                            <option value="Jasin, Melaka">
                            <option value="Melaka Tengah, Melaka">
                            <option value="Jelebu, Negeri Sembilan">
                            <option value="Jempol, Negeri Sembilan">
                            <option value="Kuala Pilah, Negeri Sembilan">
                            <option value="Port Dickson, Negeri Sembilan">
                            <option value="Rembau, Negeri Sembilan">
                            <option value="Seremban, Negeri Sembilan">
                            <option value="Tampin, Negeri Sembilan">
                            <option value="Bentong, Pahang">
                            <option value="Bera, Pahang">
                            <option value="Cameron Highlands, Pahang">
                            <option value="Jerantut, Pahang">
                            <option value="Kuantan, Pahang">
                            <option value="Lipis, Pahang">
                            <option value="Maran, Pahang">
                            <option value="Pekan, Pahang">
                            <option value="Raub, Pahang">
                            <option value="Rompin, Pahang">
                            <option value="Temerloh, Pahang">
                            <option value="Barat Daya, Penang">
                            <option value="Seberang Perai Selatan, Penang">
                            <option value="Seberang Perai Tengah, Penang">
                            <option value="Seberang Perai Utara, Penang">
                            <option value="Timur Laut, Penang">
                            <option value="Batang Padang, Perak">
                            <option value="Hilir Perak, Perak">
                            <option value="Hulu Perak, Perak">
                            <option value="Kampar, Perak">
                            <option value="Kerian, Perak">
                            <option value="Kinta, Perak">
                            <option value="Kuala Kangsar, Perak">
                            <option value="Larut, Matang dan Selama, Perak">
                            <option value="Manjung, Perak">
                            <option value="Muallim, Perak">
                            <option value="Perak Tengah, Perak">
                            <option value="Arau, Perlis">
                            <option value="Kangar, Perlis">
                            <option value="Padang Besar, Perlis">
                            <option value="Beaufort, Sabah">
                            <option value="Beluran, Sabah">
                            <option value="Keningau, Sabah">
                            <option value="Kinabatangan, Sabah">
                            <option value="Kota Belud, Sabah">
                            <option value="Kota Kinabalu, Sabah">
                            <option value="Kota Marudu, Sabah">
                            <option value="Kuala Penyu, Sabah">
                            <option value="Kudat, Sabah">
                            <option value="Kunak, Sabah">
                            <option value="Lahad Datu, Sabah">
                            <option value="Nabawan, Sabah">
                            <option value="Papar, Sabah">
                            <option value="Penampang, Sabah">
                            <option value="Pitas, Sabah">
                            <option value="Putatan, Sabah">
                            <option value="Ranau, Sabah">
                            <option value="Sandakan, Sabah">
                            <option value="Semporna, Sabah">
                            <option value="Sipitang, Sabah">
                            <option value="Tambunan, Sabah">
                            <option value="Tawau, Sabah">
                            <option value="Tenom, Sabah">
                            <option value="Tuaran, Sabah">
                            <option value="Asajaya, Sarawak">
                            <option value="Belaga, Sarawak">
                            <option value="Betong, Sarawak">
                            <option value="Bintulu, Sarawak">
                            <option value="Dalat, Sarawak">
                            <option value="Daro, Sarawak">
                            <option value="Kapit, Sarawak">
                            <option value="Kuching, Sarawak">
                            <option value="Lawas, Sarawak">
                            <option value="Limbang, Sarawak">
                            <option value="Lubok Antu, Sarawak">
                            <option value="Marudi, Sarawak">
                            <option value="Matu, Sarawak">
                            <option value="Miri, Sarawak">
                            <option value="Mukah, Sarawak">
                            <option value="Pakan, Sarawak">
                            <option value="Pusa, Sarawak">
                            <option value="Saratok, Sarawak">
                            <option value="Sarikei, Sarawak">
                            <option value="Serian, Sarawak">
                            <option value="Sibu, Sarawak">
                            <option value="Simunjan, Sarawak">
                            <option value="Subis, Sarawak">
                            <option value="Gombak, Selangor">
                            <option value="Hulu Langat, Selangor">
                            <option value="Hulu Selangor, Selangor">
                            <option value="Klang, Selangor">
                            <option value="Kuala Langat, Selangor">
                            <option value="Kuala Selangor, Selangor">
                            <option value="Petaling, Selangor">
                            <option value="Sabak Bernam, Selangor">
                            <option value="Sepang, Selangor">
                            <option value="Besut, Terengganu">
                            <option value="Dungun, Terengganu">
                            <option value="Hulu Terengganu, Terengganu">
                            <option value="Kemaman, Terengganu">
                            <option value="Kuala Nerus, Terengganu">
                            <option value="Kuala Terengganu, Terengganu">
                            <option value="Marang, Terengganu">
                            <option value="Setiu, Terengganu">
                            <option value="Kuala Lumpur">
                            <option value="Labuan">
                            <option value="Putrajaya">
                        </datalist>
                        <label class="halal-filter">
                            <input type="checkbox" id="halalFilter" checked>
                            <span>{{ t('halal_only') }}</span>
                        </label>
                    </div>
                </div>

                <div class="gigs-grid" id="gigsGrid">
                    <!-- Will be populated by JavaScript -->
                </div>

                <div class="load-more">
                    <button class="btn-secondary" onclick="app.loadMoreGigs()">{{ t('view_more') }}</button>
                </div>
            </div>
        </section>

        <!-- How It Works -->
        <section id="cara-kerja" class="how-it-works">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">{{ t('how_it_works') }}</h2>
                    <p class="section-subtitle">{{ t('easy_fast_subtitle') }}</p>
                </div>

                <div class="steps-grid">
                    <div class="step-card">
                        <div class="step-number">01</div>
                        <div class="step-icon">üìù</div>
                        <h3 class="step-title">{{ t('step_1_title') }}</h3>
                        <p class="step-description">{{ t('step_1_desc') }}</p>
                    </div>

                    <div class="step-card">
                        <div class="step-number">02</div>
                        <div class="step-icon">üîç</div>
                        <h3 class="step-title">{{ t('step_2_title') }}</h3>
                        <p class="step-description">{{ t('step_2_desc') }}</p>
                    </div>

                    <div class="step-card">
                        <div class="step-number">03</div>
                        <div class="step-icon">üíº</div>
                        <h3 class="step-title">{{ t('step_3_title') }}</h3>
                        <p class="step-description">{{ t('step_3_desc') }}</p>
                    </div>

                    <div class="step-card">
                        <div class="step-number">04</div>
                        <div class="step-icon">üí∞</div>
                        <h3 class="step-title">{{ t('step_4_title') }}</h3>
                        <p class="step-description">{{ t('step_4_desc') }}</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Testimonials -->
        <section class="testimonials-section">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">{{ t('success_stories') }}</h2>
                    <p class="section-subtitle">{{ t('success_subtitle') }}</p>
                </div>

                <div class="testimonials-grid">
                    <div class="testimonial-card">
                        <div class="testimonial-rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                        <p class="testimonial-text">{{ t('testimonial_1') }}</p>
                        <div class="testimonial-author">
                            <div style="width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, #0D7C66, #41B3A2); display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 18px;">N</div>
                            <div>
                                <div class="author-name">{{ t('testimonial_1_name') }}</div>
                                <div class="author-role">{{ t('testimonial_1_role') }}</div>
                            </div>
                        </div>
                        <div class="testimonial-earnings">{{ t('testimonial_1_earnings') }}</div>
                    </div>

                    <div class="testimonial-card">
                        <div class="testimonial-rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                        <p class="testimonial-text">{{ t('testimonial_2') }}</p>
                        <div class="testimonial-author">
                            <div style="width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, #D4AF37, #FFB33E); display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 18px;">A</div>
                            <div>
                                <div class="author-name">{{ t('testimonial_2_name') }}</div>
                                <div class="author-role">{{ t('testimonial_2_role') }}</div>
                            </div>
                        </div>
                        <div class="testimonial-earnings">{{ t('testimonial_2_earnings') }}</div>
                    </div>

                    <div class="testimonial-card">
                        <div class="testimonial-rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                        <p class="testimonial-text">{{ t('testimonial_3') }}</p>
                        <div class="testimonial-author">
                            <div style="width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, #FF6B35, #F74040); display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 18px;">S</div>
                            <div>
                                <div class="author-name">{{ t('testimonial_3_name') }}</div>
                                <div class="author-role">{{ t('testimonial_3_role') }}</div>
                            </div>
                        </div>
                        <div class="testimonial-earnings">{{ t('testimonial_3_earnings') }}</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- CTA Section -->
        <section class="cta-section">
            <div class="container">
                <div class="cta-content">
                    <h2 class="cta-title">{{ t('ready_to_earn') }}</h2>
                    <p class="cta-description">{{ t('join_freelancers') }}</p>
                    <button class="btn-cta" onclick="app.showRegister()">{{ t('register_now_free') }}</button>
                    <div class="cta-note">{{ t('cta_benefits') }}</div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <div class="container">
                <div class="footer-grid">
                    <div class="footer-col">
                        <div class="footer-brand">
                            <span class="logo-text">GigHalal</span>
                        </div>
                        <p class="footer-description">{{ t('footer_description') }}</p>
                        <div class="footer-social">
                            <a href="#" class="social-link">Facebook</a>
                            <a href="#" class="social-link">Instagram</a>
                            <a href="#" class="social-link">TikTok</a>
                            <a href="#" class="social-link">Twitter/X</a>
                        </div>
                    </div>

                    <div class="footer-col">
                        <h4 class="footer-heading">{{ t('platform') }}</h4>
                        <ul class="footer-links">
                            <li><a href="#cari-gig">{{ t('find_gigs') }}</a></li>
                            <li><a href="#kategori">{{ t('categories') }}</a></li>
                            <li><a href="#cara-kerja">{{ t('how_it_works') }}</a></li>
                            <li><a href="#">{{ t('pricing') }}</a></li>
                        </ul>
                    </div>

                    <div class="footer-col">
                        <h4 class="footer-heading">{{ t('resources') }}</h4>
                        <ul class="footer-links">
                            <li><a href="#">{{ t('blog') }}</a></li>
                            <li><a href="#">{{ t('freelancer_guide') }}</a></li>
                            <li><a href="#">{{ t('faq') }}</a></li>
                            <li><a href="#">{{ t('support') }}</a></li>
                        </ul>
                    </div>

                    <div class="footer-col">
                        <h4 class="footer-heading">{{ t('legal') }}</h4>
                        <ul class="footer-links">
                            <li><a href="#">{{ t('terms_conditions') }}</a></li>
                            <li><a href="#">{{ t('privacy_policy') }}</a></li>
                            <li><a href="#">{{ t('halal_compliance') }}</a></li>
                            <li><a href="#">{{ t('gig_workers_bill') }}</a></li>
                        </ul>
                    </div>
                </div>

                <div class="footer-bottom">
                    <div class="footer-company">
                        <img src="/static/images/calmic-logo.png" alt="Calmic Sdn Bhd" class="calmic-logo">
                        <p>&copy; 2025 GigHalal. {{ t('rights_reserved') }}</p>
                    </div>
                    <div class="visitor-counter">
                        <span>üëÅÔ∏è {{ t('visitor_count') }} <strong id="visitorCount">{{ visitor_count }}</strong></span>
                    </div>
                    <div class="footer-badges">
                        <span class="badge">{{ t('ssm_registered') }}</span>
                        <span class="badge">{{ t('secure_payment') }}</span>
                    </div>
                </div>
            </div>
        </footer>

        <!-- Modal: Login -->
        <div id="loginModal" class="modal">
            <div class="modal-content">
                <button class="modal-close" onclick="app.closeModal('loginModal')">&times;</button>
                <h2 class="modal-title">{{ t('login_title') }}</h2>
                <form id="loginForm" onsubmit="app.handleLogin(event)">
                    <div class="form-group">
                        <label>{{ t('email') }}</label>
                        <input type="email" name="email" required>
                    </div>
                    <div class="form-group">
                        <label>{{ t('password') }}</label>
                        <input type="password" name="password" required>
                    </div>
                    <button type="submit" class="btn-modal-primary">{{ t('login') }}</button>

                    <div style="margin: 20px 0; text-align: center; position: relative;">
                        <span style="background: white; padding: 0 10px; position: relative; z-index: 1; color: #666;">or continue with</span>
                        <hr style="position: absolute; top: 50%; left: 0; right: 0; z-index: 0; border: none; border-top: 1px solid #ddd;">
                    </div>

                    <div class="social-login-buttons">
                        <a href="/api/auth/google" class="btn-social btn-google">
                            <svg width="18" height="18" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">
                                <path d="M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.874 2.684-6.615z" fill="#4285F4"/>
                                <path d="M9.003 18c2.43 0 4.467-.806 5.956-2.184L12.05 13.56c-.806.54-1.836.86-3.047.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332C2.438 15.983 5.482 18 9.003 18z" fill="#34A853"/>
                                <path d="M3.964 10.712c-.18-.54-.282-1.117-.282-1.71 0-.593.102-1.17.282-1.71V4.96H.957C.347 6.175 0 7.55 0 9.002c0 1.452.348 2.827.957 4.042l3.007-2.332z" fill="#FBBC05"/>
                                <path d="M9.003 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.464.891 11.426 0 9.003 0 5.482 0 2.438 2.017.957 4.958L3.964 7.29c.708-2.127 2.692-3.71 5.036-3.71z" fill="#EA4335"/>
                            </svg>
                            Google
                        </a>
                        <a href="/api/auth/microsoft" class="btn-social btn-microsoft">
                            <svg width="18" height="18" viewBox="0 0 23 23" xmlns="http://www.w3.org/2000/svg">
                                <path fill="#f3f3f3" d="M0 0h23v23H0z"/>
                                <path fill="#f35325" d="M1 1h10v10H1z"/>
                                <path fill="#81bc06" d="M12 1h10v10H12z"/>
                                <path fill="#05a6f0" d="M1 12h10v10H1z"/>
                                <path fill="#ffba08" d="M12 12h10v10H12z"/>
                            </svg>
                            Microsoft
                        </a>
                        <a href="/api/auth/apple" class="btn-social btn-apple">
                            <svg width="18" height="18" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path d="M17.05 20.28c-.98.95-2.05.8-3.08.35-1.09-.46-2.09-.48-3.24 0-1.44.62-2.2.44-3.06-.35C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.93 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.12 1.87-2.38 5.98.48 7.13-.57 1.5-1.31 2.99-2.54 4.09l.01-.01zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.29 2.58-2.34 4.5-3.74 4.25z" fill="currentColor"/>
                            </svg>
                            Apple
                        </a>
                    </div>

                    <p class="modal-footer-text">{{ t('no_account') }} <a href="#" onclick="app.switchToRegister()">{{ t('register_now') }}</a></p>
                </form>
            </div>
        </div>

        <!-- Modal: Register -->
        <div id="registerModal" class="modal">
            <div class="modal-content">
                <button class="modal-close" onclick="app.closeModal('registerModal')">&times;</button>
                <h2 class="modal-title">{{ t('register_title') }}</h2>
                <form id="registerForm" onsubmit="app.handleRegister(event)">
                    <div class="form-group">
                        <label>{{ t('full_name') }}</label>
                        <input type="text" name="full_name" required>
                    </div>
                    <div class="form-group">
                        <label>{{ t('username') }}</label>
                        <input type="text" name="username" required>
                    </div>
                    <div class="form-group">
                        <label>{{ t('email') }}</label>
                        <input type="email" name="email" required>
                    </div>
                    <div class="form-group">
                        <label>{{ t('phone_number') }}</label>
                        <input type="tel" name="phone" placeholder="+60">
                    </div>
                    <div class="form-group">
                        <label>{{ t('ic_passport_no') }}</label>
                        <input type="text" name="ic_number" required placeholder="No. MyKad/Passport" maxlength="20">
                        <small style="color: #666; font-size: 12px;">{{ t('ic_passport_hint') }}</small>
                    </div>
                    <div class="form-group">
                        <label>{{ t('password') }}</label>
                        <input type="password" name="password" required minlength="6">
                    </div>
                    <div class="form-group">
                        <label>{{ t('location') }}</label>
                        <select name="location" required>
                            <option value="">{{ t('select_location') }}</option>
                            <option value="Kuala Lumpur">Kuala Lumpur</option>
                            <option value="Selangor">Selangor</option>
                            <option value="Penang">Penang</option>
                            <option value="Johor">Johor</option>
                            <option value="Other">Lain-lain</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>{{ t('register_as') }}</label>
                        <select name="user_type" required>
                            <option value="freelancer">{{ t('freelancer_find_work') }}</option>
                            <option value="client">{{ t('client_post_work') }}</option>
                            <option value="both">{{ t('both') }}</option>
                        </select>
                    </div>
                    <div class="form-group" style="margin-top: 20px;">
                        <label style="display: flex; align-items: start; gap: 10px; cursor: pointer; font-size: 14px; line-height: 1.5;">
                            <input type="checkbox" id="privacyConsent" name="privacy_consent" required style="margin-top: 4px; cursor: pointer;">
                            <span>
                                I agree to the <a href="#" onclick="app.showPrivacyPolicy(event)" style="color: var(--primary); text-decoration: underline;">Privacy Policy</a> and consent to GigHalal Tech processing my personal data as described, including identity verification, payment processing, and compliance with PDPA 2010.
                            </span>
                        </label>
                    </div>
                    <button type="submit" class="btn-modal-primary">{{ t('register_free') }}</button>

                    <div style="margin: 20px 0; text-align: center; position: relative;">
                        <span style="background: white; padding: 0 10px; position: relative; z-index: 1; color: #666;">or sign up with</span>
                        <hr style="position: absolute; top: 50%; left: 0; right: 0; z-index: 0; border: none; border-top: 1px solid #ddd;">
                    </div>

                    <div class="social-login-buttons">
                        <a href="/api/auth/google" class="btn-social btn-google">
                            <svg width="18" height="18" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">
                                <path d="M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.874 2.684-6.615z" fill="#4285F4"/>
                                <path d="M9.003 18c2.43 0 4.467-.806 5.956-2.184L12.05 13.56c-.806.54-1.836.86-3.047.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332C2.438 15.983 5.482 18 9.003 18z" fill="#34A853"/>
                                <path d="M3.964 10.712c-.18-.54-.282-1.117-.282-1.71 0-.593.102-1.17.282-1.71V4.96H.957C.347 6.175 0 7.55 0 9.002c0 1.452.348 2.827.957 4.042l3.007-2.332z" fill="#FBBC05"/>
                                <path d="M9.003 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.464.891 11.426 0 9.003 0 5.482 0 2.438 2.017.957 4.958L3.964 7.29c.708-2.127 2.692-3.71 5.036-3.71z" fill="#EA4335"/>
                            </svg>
                            Google
                        </a>
                        <a href="/api/auth/microsoft" class="btn-social btn-microsoft">
                            <svg width="18" height="18" viewBox="0 0 23 23" xmlns="http://www.w3.org/2000/svg">
                                <path fill="#f3f3f3" d="M0 0h23v23H0z"/>
                                <path fill="#f35325" d="M1 1h10v10H1z"/>
                                <path fill="#81bc06" d="M12 1h10v10H12z"/>
                                <path fill="#05a6f0" d="M1 12h10v10H1z"/>
                                <path fill="#ffba08" d="M12 12h10v10H12z"/>
                            </svg>
                            Microsoft
                        </a>
                        <a href="/api/auth/apple" class="btn-social btn-apple">
                            <svg width="18" height="18" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path d="M17.05 20.28c-.98.95-2.05.8-3.08.35-1.09-.46-2.09-.48-3.24 0-1.44.62-2.2.44-3.06-.35C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.93 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.12 1.87-2.38 5.98.48 7.13-.57 1.5-1.31 2.99-2.54 4.09l.01-.01zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.29 2.58-2.34 4.5-3.74 4.25z" fill="currentColor"/>
                            </svg>
                            Apple
                        </a>
                    </div>

                    <p class="modal-footer-text">{{ t('have_account') }} <a href="#" onclick="app.switchToLogin()">{{ t('login_now') }}</a></p>
                </form>
            </div>
        </div>

        <!-- Modal: Privacy Policy -->
        <div id="privacyPolicyModal" class="modal">
            <div class="modal-content modal-large" style="max-width: 800px; max-height: 85vh; overflow-y: auto;">
                <button class="modal-close" onclick="app.closeModal('privacyPolicyModal')">&times;</button>
                <h2 class="modal-title">Privacy Policy - GigHalal Tech Sdn Bhd</h2>
                <div style="padding: 20px; line-height: 1.6; font-size: 14px;">
                    <h3>1. Introduction</h3>
                    <p>GigHalal Tech Sdn Bhd ("we", "us", "our") is committed to protecting your personal data in accordance with the Personal Data Protection Act 2010 (PDPA) and its amendments. This Privacy Policy explains how we collect, use, disclose, and protect your personal data when you use the GigHalal mobile app ("App") as a freelancer, client, or visitor.</p>
                    <p>We process personal data only for lawful purposes related to providing gig matching, payment facilitation, and app services.</p>
                    <p><strong>Data Protection Officer (DPO):</strong><br>
                    Email: dpo@gighalal.my<br>
                    Contact: privacy@gighalal.my</p>

                    <h3>2. Personal Data We Collect</h3>
                    <p>We collect the following types of personal data:</p>
                    <ul>
                        <li><strong>Basic Information:</strong> Full name, phone number, email, profile photo, date of birth.</li>
                        <li><strong>Identity Verification:</strong> NRIC/Passport details (staged: last 4 digits initially; full for payouts > RM500), selfie for verification.</li>
                        <li><strong>Financial Data:</strong> Bank account/e-wallet details (e.g., Touch 'n Go), transaction history.</li>
                        <li><strong>Gig-Related Data:</strong> Skills, video pitches, location (for matching), earnings records, ratings/reviews.</li>
                        <li><strong>Device/Usage Data:</strong> IP address, device ID, app usage logs.</li>
                    </ul>
                    <p>Sensitive personal data (e.g., religious preferences for halal matching) is collected only with your explicit consent.</p>

                    <h3>3. Purposes of Processing</h3>
                    <p>We process your personal data to:</p>
                    <ul>
                        <li>Facilitate gig matching, applications, and communications.</li>
                        <li>Process payments and payouts (via licensed gateways like iPay88/SenangPay).</li>
                        <li>Verify identity and prevent fraud (KYC/AML compliance).</li>
                        <li>Provide earnings summaries and tax reports (aligned with LHDN and Gig Workers Bill 2025).</li>
                        <li>Improve app features and send notifications (with consent).</li>
                        <li>Comply with legal obligations (e.g., SOCSO contributions, dispute resolution).</li>
                    </ul>

                    <h3>4. Consent and Withdrawal</h3>
                    <p>By registering or using the App, you consent to this processing. You may withdraw consent at any time via app settings or by emailing us‚Äîthis may limit app functionality (e.g., no payouts without financial data).</p>

                    <h3>5. Disclosure to Third Parties</h3>
                    <p>We may share data with:</p>
                    <ul>
                        <li>Payment gateways and banks for transactions.</li>
                        <li>Service providers (e.g., cloud storage, analytics‚Äîbound by PDPA).</li>
                        <li>Authorities (e.g., LHDN, PDPC, Gig Workers Tribunal) as required by law.</li>
                    </ul>
                    <p>No sale of data to marketers without explicit opt-in.</p>

                    <h3>6. Data Security and Breach Notification</h3>
                    <p>We use encryption (256-bit for NRIC/financial data) and secure servers. In case of a breach likely to cause significant harm, we will notify you and the Personal Data Protection Commissioner (PDPC) as per 2025 guidelines.</p>

                    <h3>7. Your Rights</h3>
                    <p>Under PDPA, you have the right to:</p>
                    <ul>
                        <li>Access and correct your data.</li>
                        <li>Request data portability (export in structured format).</li>
                        <li>Limit processing (e.g., opt-out of marketing).</li>
                        <li>Delete your account and data (subject to legal retention).</li>
                    </ul>
                    <p>Submit requests to privacy@gighalal.my‚Äîwe respond within 30 days.</p>

                    <h3>8. Data Retention</h3>
                    <p>We retain data only as needed (e.g., 7 years for financial records per tax laws) or until account deletion.</p>

                    <h3>9. Changes to This Policy</h3>
                    <p>We may update this Policy‚Äîsignificant changes notified via app/email.</p>
                    <p><strong>Last Updated:</strong> December 2025</p>
                </div>
                <div style="padding: 20px; text-align: center; border-top: 1px solid #ddd;">
                    <button class="btn-modal-primary" onclick="app.closeModal('privacyPolicyModal')" style="min-width: 150px;">Close</button>
                </div>
            </div>
        </div>

        <!-- Modal: Gig Details -->
        <div id="gigModal" class="modal">
            <div class="modal-content modal-large">
                <button class="modal-close" onclick="app.closeModal('gigModal')">&times;</button>
                <div id="gigDetails">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <script src="/static/js/app.js"></script>
    <script>
        // Mobile Menu Functions
        function toggleMobileMenu() {
            const btn = document.getElementById('mobileMenuBtn');
            const menu = document.getElementById('mobileMenu');
            const overlay = document.getElementById('mobileMenuOverlay');
            
            btn.classList.toggle('active');
            menu.classList.toggle('active');
            overlay.classList.toggle('active');
            
            // Prevent body scroll when menu is open
            if (menu.classList.contains('active')) {
                document.body.style.overflow = 'hidden';
            } else {
                document.body.style.overflow = '';
            }
        }
        
        function closeMobileMenu() {
            const btn = document.getElementById('mobileMenuBtn');
            const menu = document.getElementById('mobileMenu');
            const overlay = document.getElementById('mobileMenuOverlay');
            
            btn.classList.remove('active');
            menu.classList.remove('active');
            overlay.classList.remove('active');
            document.body.style.overflow = '';
        }
        
        // Close mobile menu on window resize (if switching to desktop)
        window.addEventListener('resize', function() {
            if (window.innerWidth > 768) {
                closeMobileMenu();
            }
        });
        
        // Close mobile menu on escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeMobileMenu();
            }
        });

        async function toggleLanguage() {
            const currentLang = '{{ lang }}';
            const newLang = currentLang === 'ms' ? 'en' : 'ms';

            try {
                const response = await fetch('/api/language', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ language: newLang })
                });

                if (response.ok) {
                    // Reload page to apply language change
                    location.reload();
                } else {
                    console.error('Failed to change language');
                }
            } catch (error) {
                console.error('Error changing language:', error);
            }
        }
    </script>
</body>
</html>
